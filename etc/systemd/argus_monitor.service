[Unit]
Description=Argus monitoring service
After=network.target

[Service]
Type=simple
User=argus
WorkingDirectory=/home/argus/server
EnvironmentFile=/home/argus/server/.env
EnvironmentFile=/home/argus/server/secrets.env
ExecStartPre=/usr/bin/python3 /home/argus/server/bin/secret.py
ExecStart=/usr/bin/python3 -m gunicorn \
    -c src/monitor/gunicorn.conf.py \
    --timeout 60 \
    monitor.socket_io:socketio_app
Restart=always

[Install]
WantedBy=multi-user.target
